{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\slime\\\\react\\\\artistbooking\\\\frontend\\\\src\\\\pages\\\\admin\\\\ManageArtists.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useCallback } from 'react';\nimport axios from 'axios';\nimport { useAuth } from '../../context/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ManageArtists = () => {\n  _s();\n  const [artists, setArtists] = useState([]);\n  const [formData, setFormData] = useState({\n    name: '',\n    description: '',\n    image: ''\n  });\n  const [editingId, setEditingId] = useState(null);\n  const {\n    token\n  } = useAuth();\n\n  // Fetch all artists using useCallback\n  const fetchArtists = useCallback(async () => {\n    try {\n      const response = await axios.get('/api/admin/artists', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setArtists(response.data);\n    } catch (err) {\n      var _err$response;\n      console.error('Error fetching artists:', ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || err.message);\n    }\n  }, [token]); // Add token as a dependency\n\n  useEffect(() => {\n    fetchArtists();\n  }, [fetchArtists]); // Use the memoized function here\n\n  // Handle form input changes\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value\n    });\n  };\n\n  // Add or update an artist\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      if (editingId) {\n        // Update existing artist\n        await axios.put(`/api/admin/artists/${editingId}`, formData, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setEditingId(null);\n      } else {\n        // Add new artist\n        await axios.post('/api/admin/artists', formData, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n      }\n      setFormData({\n        name: '',\n        description: '',\n        image: ''\n      });\n      fetchArtists(); // Refresh the list\n    } catch (err) {\n      var _err$response2;\n      console.error('Error submitting form:', ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.data) || err.message);\n    }\n  };\n\n  // Delete an artist\n  const handleDelete = async id => {\n    try {\n      await axios.delete(`/api/admin/artists/${id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      fetchArtists(); // Refresh the list\n    } catch (err) {\n      var _err$response3;\n      console.error('Error deleting artist:', ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : _err$response3.data) || err.message);\n    }\n  };\n\n  // Edit an artist\n  const handleEdit = artist => {\n    setFormData({\n      name: artist.name,\n      description: artist.description,\n      image: artist.image\n    });\n    setEditingId(artist._id);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Manage Artists\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        placeholder: \"Name\",\n        value: formData.name,\n        onChange: handleInputChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"description\",\n        placeholder: \"Description\",\n        value: formData.description,\n        onChange: handleInputChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"image\",\n        placeholder: \"Image URL\",\n        value: formData.image,\n        onChange: handleInputChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: editingId ? 'Update Artist' : 'Add Artist'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: artists.length > 0 ? artists.map(artist => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: artist.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 17\n        }, this), \": \", artist.description, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: artist.image,\n          alt: artist.name,\n          width: \"100\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleEdit(artist),\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDelete(artist._id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 17\n        }, this)]\n      }, artist._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 13\n      }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No artists found.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 9\n  }, this);\n};\n_s(ManageArtists, \"nt/7Ds/QStjrieaAtyr5fIFBZOs=\", false, function () {\n  return [useAuth];\n});\n_c = ManageArtists;\nexport default ManageArtists;\nvar _c;\n$RefreshReg$(_c, \"ManageArtists\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","axios","useAuth","jsxDEV","_jsxDEV","ManageArtists","_s","artists","setArtists","formData","setFormData","name","description","image","editingId","setEditingId","token","fetchArtists","response","get","headers","Authorization","data","err","_err$response","console","error","message","handleInputChange","e","value","target","handleSubmit","preventDefault","put","post","_err$response2","handleDelete","id","delete","_err$response3","handleEdit","artist","_id","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","onChange","required","length","map","src","alt","width","onClick","_c","$RefreshReg$"],"sources":["C:/Users/slime/react/artistbooking/frontend/src/pages/admin/ManageArtists.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\r\nimport axios from 'axios';\r\nimport { useAuth } from '../../context/AuthContext';\r\n\r\nconst ManageArtists = () => {\r\n    const [artists, setArtists] = useState([]);\r\n    const [formData, setFormData] = useState({\r\n        name: '',\r\n        description: '',\r\n        image: '',\r\n    });\r\n    const [editingId, setEditingId] = useState(null);\r\n    const { token } = useAuth();\r\n\r\n    // Fetch all artists using useCallback\r\n    const fetchArtists = useCallback(async () => {\r\n        try {\r\n            const response = await axios.get('/api/admin/artists', {\r\n                headers: { Authorization: `Bearer ${token}` },\r\n            });\r\n            setArtists(response.data);\r\n        } catch (err) {\r\n            console.error('Error fetching artists:', err.response?.data || err.message);\r\n        }\r\n    }, [token]); // Add token as a dependency\r\n\r\n    useEffect(() => {\r\n        fetchArtists();\r\n    }, [fetchArtists]); // Use the memoized function here\r\n\r\n    // Handle form input changes\r\n    const handleInputChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData({ ...formData, [name]: value });\r\n    };\r\n\r\n    // Add or update an artist\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            if (editingId) {\r\n                // Update existing artist\r\n                await axios.put(`/api/admin/artists/${editingId}`, formData, {\r\n                    headers: { Authorization: `Bearer ${token}` },\r\n                });\r\n                setEditingId(null);\r\n            } else {\r\n                // Add new artist\r\n                await axios.post('/api/admin/artists', formData, {\r\n                    headers: { Authorization: `Bearer ${token}` },\r\n                });\r\n            }\r\n\r\n            setFormData({ name: '', description: '', image: '' });\r\n            fetchArtists(); // Refresh the list\r\n        } catch (err) {\r\n            console.error('Error submitting form:', err.response?.data || err.message);\r\n        }\r\n    };\r\n\r\n    // Delete an artist\r\n    const handleDelete = async (id) => {\r\n        try {\r\n            await axios.delete(`/api/admin/artists/${id}`, {\r\n                headers: { Authorization: `Bearer ${token}` },\r\n            });\r\n            fetchArtists(); // Refresh the list\r\n        } catch (err) {\r\n            console.error('Error deleting artist:', err.response?.data || err.message);\r\n        }\r\n    };\r\n\r\n    // Edit an artist\r\n    const handleEdit = (artist) => {\r\n        setFormData({\r\n            name: artist.name,\r\n            description: artist.description,\r\n            image: artist.image,\r\n        });\r\n        setEditingId(artist._id);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h2>Manage Artists</h2>\r\n\r\n            {/* Form for adding/updating artists */}\r\n            <form onSubmit={handleSubmit}>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"name\"\r\n                    placeholder=\"Name\"\r\n                    value={formData.name}\r\n                    onChange={handleInputChange}\r\n                    required\r\n                />\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"description\"\r\n                    placeholder=\"Description\"\r\n                    value={formData.description}\r\n                    onChange={handleInputChange}\r\n                    required\r\n                />\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"image\"\r\n                    placeholder=\"Image URL\"\r\n                    value={formData.image}\r\n                    onChange={handleInputChange}\r\n                    required\r\n                />\r\n                <button type=\"submit\">{editingId ? 'Update Artist' : 'Add Artist'}</button>\r\n            </form>\r\n\r\n            {/* List of artists */}\r\n            <ul>\r\n    {artists.length > 0 ? (\r\n        artists.map((artist) => (\r\n            <li key={artist._id}>\r\n                <strong>{artist.name}</strong>: {artist.description}\r\n                <br />\r\n                <img src={artist.image} alt={artist.name} width=\"100\" />\r\n                <br />\r\n                <button onClick={() => handleEdit(artist)}>Edit</button>\r\n                <button onClick={() => handleDelete(artist._id)}>Delete</button>\r\n            </li>\r\n        ))\r\n    ) : (\r\n        <p>No artists found.</p>\r\n    )}\r\n</ul>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ManageArtists;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}